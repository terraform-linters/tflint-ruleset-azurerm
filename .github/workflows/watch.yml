name: watch

on:
  schedule:
    - cron: "0 0 * * *"

permissions:
  contents: write
  pull-requests: write

jobs:
  azure_docs:
    name: azure-docs
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6.0.2
    - name: Calculate diff
      run: |
        curl https://raw.githubusercontent.com/MicrosoftDocs/azure-compute-docs/main/articles/virtual-machines/sizes/overview.md --output .github/snapshots/size.md
    - name: Create PR
      uses: peter-evans/create-pull-request@c0f553fe549906ede9cf27b5156039d195d2ece0 # v8.1.0
      with:
        branch: azure-docs
        title: ðŸ¤– MicrosoftDocs/azure-docs changes
        commit-message: |
          Manually edit https://github.com/terraform-linters/tflint-ruleset-azurerm/edit/azure-docs/rules/utils.go
          based on https://github.com/MicrosoftDocs/azure-compute-docs/blob/main/articles/virtual-machines/sizes/overview.md
        delete-branch: true
