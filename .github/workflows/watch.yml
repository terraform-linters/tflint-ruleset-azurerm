name: watch

on:
  schedule:
    - cron: "0 0 * * *"

permissions:
  contents: write
  pull-requests: write

jobs:
  azure_docs:
    name: azure-docs
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1
    - name: Calculate diff
      run: |
        curl https://raw.githubusercontent.com/MicrosoftDocs/azure-compute-docs/main/articles/virtual-machines/sizes/overview.md --output .github/snapshots/size.md
    - name: Create PR
      uses: peter-evans/create-pull-request@84ae59a2cdc2258d6fa0732dd66352dddae2a412 # v7.0.9
      with:
        branch: azure-docs
        title: ðŸ¤– MicrosoftDocs/azure-docs changes
        commit-message: |
          Manually edit https://github.com/terraform-linters/tflint-ruleset-azurerm/edit/azure-docs/rules/utils.go
          based on https://github.com/MicrosoftDocs/azure-compute-docs/blob/main/articles/virtual-machines/sizes/overview.md
        delete-branch: true
